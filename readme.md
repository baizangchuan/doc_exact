# 背景信息
统一命名：
文件上传，取scheme：纠错解析模式
调用解析接口，把txt转化为json：线上解析模式

**纠错解析模式**：
(待补充)

**线上解析模式**：
解析函数：Main.java
解析部署：src/main/java/org/example/SpringbootExampleApplication.java

纠错解析模式对应的前端页面：
(待补充)


# 流程策略图
## 线上解析模式





# 调试日志

## 2025-02-20 
Main.java可以出结果，不过出参数目是否对上了尚不清楚

- 检查线上策略用的表是否和本地用的表一样
- 是否是文件上传模块有问题，导致缺少对应的表

## 2025-02-20 
- 提取的内容严重对不上，观测到的情况：
    1. doc_type为空，入参文件中没有任何关于文doc_type的信息
    2. 灾难性后缀提取，即对于没有的键值对，会出现“"记录时间"："：职业：农民病史描述者：本人出生日期：1971年10月20日联系人：张三联系人电话：13999251221联系方式：13999251221主诉：1.重症肌无力，眼肌型2.慢性乙型病毒性肝炎"”的情况

- 从几个方面分析问题：
    - 看spd发的截图，观察是否是相同的错误
    - 看spd的截图是否也没有doc_type信息
    - 对文件上传部分的每一个文件，都做解析测试，观察结果
    - 到对应的表里去看看，是否有中文scheme

- **解决问题的方法**：
    1. 梳理运行逻辑
    2. 解析逻辑更改：当表中为Abbb C结构时，应当增加“A”和“ ”之间的内容也要被提取，即原本的去除所有空格，再提取“A”和“C”之间的逻辑，不完全可取。
    3. 数据库 scheme部分，单增一列，放scheme对应的doc_type，后续解析根据doc_type取scheme直接用这个逻辑
    4. scheme顺序问题：一定要和前端配置的保持一致，后端直接不排序

## 测试流程
将原表中涉及的表备份，删除
找到相关上传的测试用文件
批量上传文件，建新表
测试解析接口得到的结果，必要时专门写个函数用于output和ground_truth比较。看解析结果，准确率，分析不准的原因

和老师说清楚是历史遗留问题：无法排序